



<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2021-10-18 22:36:51 -0500">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="">
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/lesson.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/syntax.css" />

    



    <!-- Favicons for everyone -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="http://localhost:4000/assets/favicons/swc/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/assets/favicons/swc/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/assets/favicons/swc/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/assets/favicons/swc/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="http://localhost:4000/assets/favicons/swc/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://localhost:4000/assets/favicons/swc/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://localhost:4000/assets/favicons/swc/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://localhost:4000/assets/favicons/swc/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="http://localhost:4000/assets/favicons/swc/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="http://localhost:4000/assets/favicons/swc/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="http://localhost:4000/assets/favicons/swc/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="http://localhost:4000/assets/favicons/swc/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="http://localhost:4000/assets/favicons/swc/favicon-128.png" sizes="128x128" />
    <meta name="application-name" content="Software Carpentry - UChicago Tier 3 Batch & Storage"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="http://localhost:4000/assets/favicons/swc/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="http://localhost:4000/assets/favicons/swc/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="http://localhost:4000/assets/favicons/swc/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="http://localhost:4000/assets/favicons/swc/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="http://localhost:4000/assets/favicons/swc/mstile-310x310.png" />


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
    <title>UChicago Tier 3 Batch & Storage: Managing a job</title>
  </head>
  <body>

    


<div class="panel panel-default life-cycle">
  <div id="life-cycle" class="panel-body pre-alpha">
    This lesson is still being designed and assembled (Pre-Alpha version)
  </div>
</div>





    <div class="container">
      
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      
      <a href="https://software-carpentry.org" class="pull-left">
        <img class="navbar-logo" src="../assets/img/swc-icon-blue.svg" alt="Software Carpentry logo" />
      </a>
      

      
      <a class="navbar-brand" href="../index.html">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

	
        <li><a href="../CODE_OF_CONDUCT.html">Code of Conduct</a></li>

        
	
        <li><a href="../setup.html">Setup</a></li>

        
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Episodes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            <li><a href="../01-introduction/index.html">Introduction</a></li>
            
            <li><a href="../02-htcondor%20quick/index.html">HTCondor Quick Start</a></li>
            
            <li><a href="../03-running_ajob/index.html">Running a Job</a></li>
            
            <li><a href="../04-submitting_ajob/index.html">Submitting a Job</a></li>
            
            <li><a href="../05-coffee/index.html">Coffee break!</a></li>
            
            <li><a href="../06-managing_ajob/index.html">Managing a job</a></li>
            
            <li><a href="../07-services_goodpractices/index.html">Services for Running Jobs</a></li>
            
	    <li role="separator" class="divider"></li>
            <li><a href="../aio/index.html">All in one page (Beta)</a></li>
          </ul>
        </li>
	

	
	
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Extras <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="../reference.html">Reference</a></li>
            
          </ul>
        </li>
	

	
        <li><a href="../LICENSE.html">License</a></li>
	
	<li><a href="/edit/gh-pages/_episodes/06-managing_ajob.md">Improve this page <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></li>
	
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>


<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../05-coffee/index.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
    <h3 class="maintitle"><a href="../">UChicago Tier 3 Batch & Storage</a></h3>
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../07-services_goodpractices/index.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>

<article>
<div class="row">
  <div class="col-md-1">
  </div>
  <div class="col-md-10">
    <h1 class="maintitle">Managing a job</h1>
  </div>
  <div class="col-md-1">
  </div>
</div>


<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 15 min
      <br/>
      <strong>Exercises:</strong> 25 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>Who is Justice Beaver</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>-</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>What to do once jobs are submitted?</p>

<h3 id="checking-on-the-progress-of-jobs">Checking on the progress of jobs</h3>

<p>You can check on your jobs with the condor_q command.</p>

<p>condor_q</p>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Schedd: submit.chtc.wisc.edu : &lt;127.0.0.1:9618?... @ 12/31/69 23:00:00
OWNER    BATCH_NAME    SUBMITTED   DONE   RUN    IDLE   HOLD  TOTAL JOB_IDS
nemo     batch23       4/22 20:44      _      _      _      1      _ 3671850.0
nemo     batch24       4/22 20:56      _      _      _      1      _ 3673477.0
nemo     batch25       4/22 20:57      _      _      _      1      _ 3673728.0
nemo     batch26       4/23 10:44      _      _      _      1      _ 3750339.0
nemo     batch27       7/2  15:11      _      _      _      _      _ 7594591.0
nemo     batch28       7/10 03:22   4428      3      _      _   4434 7801943.0 ... 7858552.0
nemo     batch29       7/14 14:18   5074   1182     30     19  80064 7859129.0 ... 7885217.0
nemo     batch30       7/14 14:18   5172   1088     28     30  58310 7859106.0 ... 7885192.0

2388 jobs; 0 completed, 1 removed, 58 idle, 2276 running, 53 held, 0 suspended
</code></pre></div></div>

<p>Often, when you are starting out, and have few jobs, you may want to see one line of output per job. The -nobatch option to condor_q does this, and output might look something like:</p>

<p>condor_q -nobatch</p>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Schedd submit.chtc.wisc.edu : &lt;127.0.0.1:9618?...
ID          OWNER        SUBMITTED     RUN_TIME ST PRI SIZE CMD
1297254.0   nemo         5/31 18:05  14+17:40:01 R  0   7.3  condor_dagman
1297255.0   nemo         5/31 18:05  14+17:39:55 R  0   7.3  condor_dagman
1297256.0   nemo         5/31 18:05  14+17:39:55 R  0   7.3  condor_dagman
1297259.0   nemo         5/31 18:05  14+17:39:55 R  0   7.3  condor_dagman
1297261.0   nemo         5/31 18:05  14+17:39:55 R  0   7.3  condor_dagman
1302278.0   nemo         6/4  12:22   1+00:05:37 I  0   390.6 mdrun_1.sh
1304740.0   nemo         6/5  00:14   1+00:03:43 I  0   390.6 mdrun_1.sh
1304967.0   nemo         6/5  05:08   0+00:00:00 I  0   0.0  mdrun_1.sh

14 jobs; 4 idle, 8 running, 2 held
</code></pre></div></div>

<p>The output contains many columns of information about the queued jobs. The ST column (for status) shows the status of current jobs in the queue:</p>

<ul>
  <li>R: The job is currently running.</li>
  <li>I: The job is idle. It is not running right now, because it is waiting for a machine to become available.</li>
  <li>H: The job is the hold state. In the hold state, the job will not be scheduled to run until it is released. See the condor_hold and the condor_release manual pages.</li>
</ul>

<p>Another useful method of tracking the progress of jobs is through the job event log.</p>

<p>When a job begins to run, HTCondor starts up a condor_shadow process on the submit machine.</p>

<p>You can also find all the machines that are running your job through the condor_status command. For example, to find all the machines that are running jobs submitted by breach@cs.wisc.edu, type:</p>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>condor_status -constraint 'RemoteUser == "breach@cs.wisc.edu"'

Name       Arch     OpSys        State      Activity   LoadAv Mem  ActvtyTime

alfred.cs. INTEL    LINUX        Claimed    Busy       0.980  64    0+07:10:02
biron.cs.w INTEL    LINUX        Claimed    Busy       1.000  128   0+01:10:00
cambridge. INTEL    LINUX        Claimed    Busy       0.988  64    0+00:15:00
falcons.cs INTEL    LINUX        Claimed    Busy       0.996  32    0+02:05:03
happy.cs.w INTEL    LINUX        Claimed    Busy       0.988  128   0+03:05:00
istat03.st INTEL    LINUX        Claimed    Busy       0.883  64    0+06:45:01
istat04.st INTEL    LINUX        Claimed    Busy       0.988  64    0+00:10:00
istat09.st INTEL    LINUX        Claimed    Busy       0.301  64    0+03:45:00
...
</code></pre></div></div>
<p>To find all the machines that are running any job at all, type:</p>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>condor_status -run

Name       Arch     OpSys        LoadAv RemoteUser           ClientMachine

adriana.cs INTEL    LINUX        0.980  hepcon@cs.wisc.edu   chevre.cs.wisc.
alfred.cs. INTEL    LINUX        0.980  breach@cs.wisc.edu   neufchatel.cs.w
amul.cs.wi X86_64   LINUX        1.000  nice-user.condor@cs. chevre.cs.wisc.
anfrom.cs. X86_64   LINUX        1.023  ashoks@jules.ncsa.ui jules.ncsa.uiuc
anthrax.cs INTEL    LINUX        0.285  hepcon@cs.wisc.edu   chevre.cs.wisc.
astro.cs.w INTEL    LINUX        1.000  nice-user.condor@cs. chevre.cs.wisc.
aura.cs.wi X86_64   WINDOWS      0.996  nice-user.condor@cs. chevre.cs.wisc.
balder.cs. INTEL    WINDOWS      1.000  nice-user.condor@cs. chevre.cs.wisc.
bamba.cs.w INTEL    LINUX        1.574  dmarino@cs.wisc.edu  riola.cs.wisc.e
bardolph.c INTEL    LINUX        1.000  nice-user.condor@cs. chevre.cs.wisc.
...
</code></pre></div></div>

<h2 id="peeking-in-on-a-running-jobs-output-files">Peeking in on a running job’s output files</h2>

<p><code class="language-plaintext highlighter-rouge">The condor_tail</code> command can copy output files from a running job on a remote machine back to the submit machine. condor_tail uses the same networking stack as HTCondor proper, so it will work if the execute machine is behind a firewall.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>condor_tail <span class="nt">-f</span> xx.yy
</code></pre></div></div>
<p>To copy a different file, run</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>condor_tail xx.yy name_of_output_file
</code></pre></div></div>

<h2 id="removing-a-job-from-a-queue">Removing a job from a queue</h2>

<p><code class="language-plaintext highlighter-rouge">condor_rm</code></p>

<div class="language-bash output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>condor_q <span class="nt">-nobatch</span>

<span class="nt">--</span> Schedd: froth.cs.wisc.edu : &lt;128.105.73.44:33847&gt; : froth.cs.wisc.edu
 ID      OWNER            SUBMITTED    CPU_USAGE ST PRI SIZE CMD
 125.0   raman           4/11 14:37   0+00:00:00 R  0   1.4  sleepy
 132.0   raman           4/11 16:57   0+00:00:00 R  0   1.4  hello

2 <span class="nb">jobs</span><span class="p">;</span> 1 idle, 1 running, 0 held

condor_rm 132.0
Job 132.0 removed.

condor_q <span class="nt">-nobatch</span>

<span class="nt">--</span> Schedd: froth.cs.wisc.edu : &lt;128.105.73.44:33847&gt; : froth.cs.wisc.edu
 ID      OWNER            SUBMITTED    CPU_USAGE ST PRI SIZE CMD
 125.0   raman           4/11 14:37   0+00:00:00 R  0   1.4  sleepy

1 <span class="nb">jobs</span><span class="p">;</span> 1 idle, 0 running, 0 held
</code></pre></div></div>

<h2 id="placing-a-job-on-hold">Placing a job on hold</h2>

<p><code class="language-plaintext highlighter-rouge">condor_hold</code>
<code class="language-plaintext highlighter-rouge">condor_release</code></p>

<p>Jobs that are running when placed on hold will start over from the beginning when released.</p>

<h2 id="changing-the-priority-of-jobs">Changing the priority of jobs</h2>

<p>HTCondor provides each user with the capability of assigning priorities to each submitted job.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>condor_q <span class="nt">-nobatch</span> raman

<span class="nt">--</span> Submitter: froth.cs.wisc.edu : &lt;128.105.73.44:33847&gt; : froth.cs.wisc.edu
 ID      OWNER            SUBMITTED    CPU_USAGE ST PRI SIZE CMD
 126.0   raman           4/11 15:06   0+00:00:00 I  0   0.3  hello

1 <span class="nb">jobs</span><span class="p">;</span> 1 idle, 0 running, 0 held

condor_prio <span class="nt">-p</span> <span class="nt">-15</span> 126.0

condor_q <span class="nt">-nobatch</span> raman

<span class="nt">--</span> Submitter: froth.cs.wisc.edu : &lt;128.105.73.44:33847&gt; : froth.cs.wisc.edu
 ID      OWNER            SUBMITTED    CPU_USAGE ST PRI SIZE CMD
 126.0   raman           4/11 15:06   0+00:00:00 I  <span class="nt">-15</span> 0.3  hello

1 <span class="nb">jobs</span><span class="p">;</span> 1 idle, 0 running, 0 held
</code></pre></div></div>

<p>It is important to note that these job priorities are completely different from the user priorities assigned by HTCondor.</p>

<p>## Why is the job not running?</p>

<p>The most common reason why the job is not running is that HTCondor has not yet been through its periodic negotiation cycle, in which queued jobs are assigned to machines within the pool and begin their execution.</p>

<p>‘-analyze` option of the condor_q command. Here is an example;</p>

<div class="language-bash output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>condor_q <span class="nt">-analyze</span> 27497829

<span class="nt">--</span> Submitter: s1.chtc.wisc.edu : &lt;128.104.100.43:9618?sock<span class="o">=</span>5557_e660_3&gt; : s1.chtc.wisc.edu
User priority <span class="k">for </span>ei@chtc.wisc.edu is not available, attempting to analyze without it.
<span class="nt">---</span>
27497829.000:  Run analysis summary.  Of 5257 machines,
   5257 are rejected by your job<span class="s1">'s requirements
      0 reject your job because of their own requirements
      0 match and are already running your jobs
      0 match but are serving other users
      0 are available to run your job
        No successful match recorded.
        Last failed match: Tue Jun 18 14:36:25 2013

        Reason for last match failure: no match found

WARNING:  Be advised:
   No resources matched request'</span>s constraints

The Requirements expression <span class="k">for </span>your job is:

    <span class="o">(</span> OpSys <span class="o">==</span> <span class="s2">"OSX"</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Arch <span class="o">==</span> <span class="s2">"X86_64"</span> <span class="o">)</span> <span class="o">&amp;&amp;</span>
    <span class="o">(</span> TARGET.Disk <span class="o">&gt;=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory <span class="o">&gt;=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span>
    <span class="o">(</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span> <span class="o">||</span> <span class="o">(</span> TARGET.FileSystemDomain <span class="o">==</span> MY.FileSystemDomain <span class="o">)</span> <span class="o">)</span>


Suggestions:
    Condition                         Machines Matched Suggestion
    <span class="nt">---------</span>                         <span class="nt">----------------</span> <span class="nt">----------</span>
1   <span class="o">(</span> target.OpSys <span class="o">==</span> <span class="s2">"OSX"</span> <span class="o">)</span>         0                MODIFY TO <span class="s2">"LINUX"</span>
2   <span class="o">(</span> TARGET.Arch <span class="o">==</span> <span class="s2">"X86_64"</span> <span class="o">)</span>       5190
3   <span class="o">(</span> TARGET.Disk <span class="o">&gt;=</span> 1 <span class="o">)</span>              5257
4   <span class="o">(</span> TARGET.Memory <span class="o">&gt;=</span> ifthenelse<span class="o">(</span>MemoryUsage isnt undefined,MemoryUsage,1<span class="o">)</span> <span class="o">)</span>
                                      5257
5   <span class="o">(</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span> <span class="o">||</span> <span class="o">(</span> TARGET.FileSystemDomain <span class="o">==</span> <span class="s2">"submit-1.chtc.wisc.edu"</span> <span class="o">)</span> <span class="o">)</span>
                                      5257
</code></pre></div></div>

<h2 id="job-in-the-hold-state">Job in the Hold State</h2>

<p>For the example job ID 16.0, use:</p>

<p>condor_q  -hold  16.0</p>

<h2 id="job-termination">Job Termination</h2>

<p>A ticket of execution is usually issued by the condor_startd, and includes:</p>

<ul>
  <li>
    <p>when the condor_startd was told, or otherwise decided, to terminate the job (the when attribute);</p>
  </li>
  <li>
    <p>who made the decision to terminate, usually a Sinful string (the who attribute);</p>
  </li>
  <li>
    <p>and what method was employed to command the termination, as both as string and an integer (the How and HowCode attributes).</p>
  </li>
</ul>

<p>The relevant log events include a human-readable rendition of the ToE, and the job ad is updated with the ToE after the usual delay.</p>

<p>As of version 8.9.4, HTCondor only issues ToE in three cases:</p>

<ul>
  <li>
    <p>when the job terminates of its own accord (issued by the starter, HowCode 0);</p>
  </li>
  <li>
    <p>and when the startd terminates the job because it received a DEACTIVATE_CLAIM commmand (HowCode 1)</p>
  </li>
  <li>
    <p>or a DEACTIVATE_CLAIM_FORCIBLY command (HowCode 2).</p>
  </li>
</ul>

<h2 id="job-completion">Job Completion</h2>

<p>When an HTCondor job completes, either through normal means or by abnormal termination by signal, HTCondor will remove it from the job queue.</p>

<p>By default, HTCondor does not send an email message when the job completes. Modify this behavior with the notification command in the submit description file. The message will include the exit status of the job, which is the argument that the job passed to the exit system call when it completed, or it will be notification that the job was killed by a signal. Notification will also include the following statistics (as appropriate) about the job:</p>

<ul>
  <li>
    <p><strong>Submitted</strong> at:</p>

    <p>when the job was submitted with condor_submit</p>
  </li>
  <li>
    <p><strong>Completed</strong> at:</p>

    <p>when the job completed</p>
  </li>
  <li>
    <p><strong>Real Time:</strong></p>

    <p>the elapsed time between when the job was submitted and when it completed, given in a form of <days> <hours>:<minutes>:<seconds></seconds></minutes></hours></days></p>
  </li>
  <li>
    <p><strong>Virtual Image Size:</strong></p>

    <p>memory size of the job, computed when the job checkpoints</p>
  </li>
</ul>

<p>The job terminated event includes the following:</p>

<ul>
  <li>
    <p>the type of termination (normal or by signal)</p>
  </li>
  <li>
    <p>the return value (or signal number)</p>
  </li>
  <li>
    <p>local and remote usage for the last (most recent) run (in CPU-seconds)</p>
  </li>
  <li>
    <p>local and remote usage summed over all runs (in CPU-seconds)</p>
  </li>
  <li>
    <p>bytes sent and received by the job’s last (most recent) run,</p>
  </li>
  <li>
    <p>bytes sent and received summed over all runs,</p>
  </li>
  <li>
    <p>a report on which partitionable resources were used, if any. Resources include CPUs, disk, and memory; all are lifetime peak values.</p>
  </li>
</ul>

<h2 id="summary-of-all-htcondor-users-and-their-jobs">Summary of all HTCondor users and their jobs</h2>

<p>When jobs are submitted, HTCondor will attempt to find resources to run the jobs.</p>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>condor_status -submitters


Name                 Machine      Running IdleJobs HeldJobs

ballard@cs.wisc.edu  bluebird.c         0       11        0
nice-user.condor@cs. cardinal.c         6      504        0
wright@cs.wisc.edu   finch.cs.w         1        1        0
jbasney@cs.wisc.edu  perdita.cs         0        0        5

                           RunningJobs           IdleJobs           HeldJobs

 ballard@cs.wisc.edu                 0                 11                  0
 jbasney@cs.wisc.edu                 0                  0                  5
nice-user.condor@cs.                 6                504                  0
  wright@cs.wisc.edu                 1                  1                  0

               Total                 7                516                  5
</code></pre></div></div>

<p>## Automatically managing a job</p>

<p>### Automatically rerunning a failed job</p>

<p>If a job exits with a non-zero exit code, this usually means that some error has happened.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Example submit description with max_retries</span>

executable   <span class="o">=</span> myexe
arguments    <span class="o">=</span> SomeArgument

<span class="c"># Retry this job 5 times if non-zero exit code</span>
max_retries <span class="o">=</span> 5

output       <span class="o">=</span> outputfile
error        <span class="o">=</span> errorfile
log          <span class="o">=</span> myexe.log

request_cpus   <span class="o">=</span> 1
request_memory <span class="o">=</span> 1024
request_disk   <span class="o">=</span> 10240

should_transfer_files <span class="o">=</span> <span class="nb">yes

</span>queue
</code></pre></div></div>

<h2 id="automatically-removing-a-job-in-the-queue">Automatically removing a job in the queue</h2>

<p>In the submit description file, set periodic_remove to a classad expression. For example, to automatically remove a job which has been in the queue for more than 100 hours, the submit file could have</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>periodic_remove <span class="o">=</span> <span class="o">(</span><span class="nb">time</span><span class="o">()</span> - QDate<span class="o">)</span> <span class="o">&gt;</span> <span class="o">(</span>100 <span class="k">*</span> 3600<span class="o">)</span>
</code></pre></div></div>

<p>or, to remove jobs that have been running for more than two hours:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>periodic_remove <span class="o">=</span> <span class="o">(</span>JobStatus <span class="o">==</span> 2<span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="nb">time</span><span class="o">()</span> - EnteredCurrentStatus<span class="o">)</span> <span class="o">&gt;</span> <span class="o">(</span>2 <span class="k">*</span> 3600<span class="o">)</span>
</code></pre></div></div>

<h2 id="automatically-releasing-a-held-job">Automatically releasing a held job</h2>

<p>In the same way that a job can be automatically held, jobs in the held state can be released with the periodic_release command. Often, using a periodic_hold with a paired periodic_release is a good way to restart a stuck job.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>periodic_hold <span class="o">=</span> <span class="o">(</span>JobStatus <span class="o">==</span> 2<span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="nb">time</span><span class="o">()</span> - EnteredCurrentStatus<span class="o">)</span> <span class="o">&gt;</span> <span class="o">(</span>2 <span class="k">*</span> 3600<span class="o">)</span>
periodic_hold_reason <span class="o">=</span> <span class="s2">"Job ran for more than two hours"</span>
periodic_hold_subcode <span class="o">=</span> 42
periodic_release <span class="o">=</span> <span class="o">(</span>HoldReasonSubCode <span class="o">==</span> 42<span class="o">)</span>
</code></pre></div></div>

<h2 id="holding-a-completed-job">Holding a completed job</h2>

<p>A job may exit, and HTCondor consider it completed, even though something has gone wrong with the job. A held job informs users that there may have been a problem with the job that should be investigated. For example, if a job should never exit by a signal, the job can be put on hold if it does with</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>on_exit_hold <span class="o">=</span> ExitBySignal <span class="o">==</span> <span class="nb">true</span>
</code></pre></div></div>



<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>-</p>
</li>
    
  </ul>
</blockquote>

</article>

<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../05-coffee/index.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../07-services_goodpractices/index.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>


      
      
<footer>
  <div class="row">
    <div class="col-md-6 copyright" align="left">
	
	Licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY 4.0</a> 2018–2021
	by <a href="https://carpentries.org/">The Carpentries</a>
        <br>
        Licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY 4.0</a> 2016–2018
	by <a href="https://software-carpentry.org">Software Carpentry Foundation</a>
	
    </div>
    <div class="col-md-6 help-links" align="right">
	
	<a href="/edit/gh-pages/_episodes/06-managing_ajob.md">Edit on GitHub</a>
	
	/
	<a href="/blob/gh-pages/CONTRIBUTING.md">Contributing</a>
	/
	<a href="/">Source</a>
	/
	<a href="/blob/gh-pages/CITATION">Cite</a>
	/
	<a href="mailto:duranmcecilia@gmail.com">Contact</a>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" align="center">
      Using <a href="https://github.com/carpentries/styles/">The Carpentries style</a>
      version <a href="https://github.com/carpentries/styles/releases/tag/v9.5.3">9.5.3</a>.
    </div>
  </div>
</footer>

      
    </div>
    
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
